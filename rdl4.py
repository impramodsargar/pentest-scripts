import os

# Prompt the user for the input RDL file path
rdl_file_path = input("Enter the path to the RDL file: ")

# Prompt the user for the desired output directory
output_directory = input("Enter the path to the output directory: ")

# Ensure the output directory exists; if not, create it
if not os.path.exists(output_directory):
    os.makedirs(output_directory)

# Prompt the user for the output wordlist file name
output_wordlist_file = input("Enter the name for the output wordlist file (e.g., output_wordlist.txt): ")

# Combine the output directory path with the output wordlist file name
output_wordlist_path = os.path.join(output_directory, output_wordlist_file)

# Initialize an empty list to store the paths
wordlist = []

# Open and read the RDL file
try:
    with open(rdl_file_path, 'r') as rdl_file:
        current_directory = ""  # Initialize the current directory variable
        # Read each line in the RDL file
        for line in rdl_file:
            # Check if the line represents a directory (starts with "./")
            if line.startswith("./"):
                # Extract the current directory path, removing the trailing colon and whitespace,
                # and remove the leading "./"
                current_directory = line.strip().rstrip(':').lstrip('./')
            elif current_directory:  # Only add to wordlist if we have a current directory
                # Extract the filename by splitting the line
                parts = line.split()
                if len(parts) > 0:
                    filename = parts[-1]
                    # Append it to the wordlist with the corrected path
                    wordlist.append("/" + current_directory + "/" + filename)
except FileNotFoundError:
    print(f"RDL file not found at {rdl_file_path}. Please provide the correct file path.")
    exit(1)

# Write the wordlist to the output file in the specified output directory
try:
    with open(output_wordlist_path, 'w') as output_file:
        for item in wordlist:
            output_file.write("%s\n" % item)
    print(f"Wordlist with paths and filenames has been saved to {output_wordlist_path}.")
except Exception as e:
    print(f"An error occurred while writing the wordlist: {str(e)}")

# Optional: Display the wordlist
print("\nWordlist with paths and filenames:")
for item in wordlist:
    print(item)
